╔══════════════════════════════════════════════════════════════════════╗
║                    Recipe Storage System - Help                      ║
╚══════════════════════════════════════════════════════════════════════╝

INGREDIENT COMMANDS
───────────────────
  ingredient add
    Add a new ingredient using JSON file workflow:
    • First run: Creates addable/new_ingredient.json template
    • Edit the JSON file with ingredient details (name, type, notes, tags)
    • Second run: Creates ingredient and deletes JSON file
    • Delete JSON file to cancel

  ingredient list
    List all ingredients with tags and notes

  ingredient edit --id <id> | --name <name>
    Edit an ingredient using JSON file workflow:
    • First run: Creates editable/ingredient_<id>.json
    • Edit the JSON file
    • Second run: Imports changes and deletes JSON file
    • Delete JSON file to cancel editing

  ingredient delete --id <id>
    Delete an ingredient by ID (exact match required)

  ingredient search <query> [--limit <n>] [--min-score <score>] [--semantic]
    Search for ingredients by approximate name matching
    Use --semantic flag for semantic search (requires embeddings)
    Example: ingredient search "tomato" --limit 5 --min-score 60
    Example: ingredient search "mushroom" --semantic

  ingredient suggest <ingredients> [--min-score <score>] [--semantic]
    Suggest recipes containing the given ingredients (with fuzzy matching)
    Use --semantic flag for semantic search (requires embeddings)
    Ingredients are normalized (singular, lowercase) and matched approximately
    Example: ingredient suggest "basil, tomato pesto"
    Example: ingredient suggest "mushroom, wine" --semantic


RECIPE COMMANDS
───────────────
  recipe add
    Add a new recipe using JSON file workflow:
    • First run: Creates addable/new_recipe.json template
    • Edit the JSON file with recipe details
    • Second run: Creates recipe and deletes JSON file
    • Delete JSON file to cancel

  recipe list
    List all recipes with full details

  recipe edit --id <id> | --name <name>
    Edit a recipe using JSON file workflow:
    • First run: Creates editable/recipe_<id>.json
    • Edit the JSON file in your editor
    • Second run: Imports changes and deletes JSON file
    • Delete JSON file to cancel editing

  recipe delete --id <id>
    Delete a recipe by ID (exact match required)

  recipe search <query> [--limit <n>] [--min-score <score>] [--semantic]
    Search for recipes by approximate name matching
    Use --semantic flag for semantic search (requires embeddings)
    Example: recipe search "pasta" --limit 5 --min-score 60
    Example: recipe search "mushroom pasta" --semantic


ARTICLE COMMANDS
────────────────
  article add
    Add a new article using JSON file workflow:
    • First run: Creates addable/new_article.json template
    • Edit the JSON file with article details (notes, tags)
    • Second run: Creates article and deletes JSON file
    • Delete JSON file to cancel

  article list
    List all articles with tags and notes preview

  article edit --id <id>
    Edit an article using JSON file workflow:
    • First run: Creates editable/article_<id>.json
    • Edit the JSON file
    • Second run: Imports changes and deletes JSON file
    • Delete JSON file to cancel editing

  article delete --id <id>
    Delete an article by ID (exact match required)


UTILITY COMMANDS
────────────────
  types
    List all ingredient types

  tags list
    List all tags

  tags recipe search <tag> [--min-score <score>]
    Search for recipes by tag name (with fuzzy matching)
    Example: tags recipe search "italian" --min-score 70

  tags ingredient search <tag> [--min-score <score>]
    Search for ingredients by tag name (with fuzzy matching)
    Example: tags ingredient search "spice" --min-score 70

  tags article search <tag> [--min-score <score>]
    Search for articles by tag name (with fuzzy matching)
    Example: tags article search "cooking" --min-score 70

  stats
    Display database statistics (counts, next IDs, averages)

  ask <question> [--model <model>]
    Ask natural language questions about your recipes, ingredients, and articles
    Uses Ollama for AI-powered responses (requires Ollama to be installed and running)
    Example: python cli.py ask "What recipes use mushrooms?"
    Example: python cli.py ask "What Italian recipes do I have?" --model llama3.2
    Note: Install Ollama from https://ollama.com and run: ollama pull llama3.2

  embed [default|force]
    Generate embeddings for recipes, ingredients, and articles
    • default: Generate embeddings for entries with stale_embedding=True
    • force: Force regenerate embeddings for ALL entries
    Example: python cli.py embed
    Example: python cli.py embed force
    Note: Run this before using --semantic flag in search commands

  cleanup
    Delete all JSON staging files in addable/ and editable/ directories
    Useful for cleaning up leftover files from add/edit operations

  help
    Show this help message


EXAMPLES
────────
  # Add ingredients (JSON workflow)
  python cli.py ingredient add
  # Edit addable/new_ingredient.json, then run the same command again

  # Add a recipe (JSON workflow)
  python cli.py recipe add
  # Edit addable/new_recipe.json, then run the same command again

  # Edit a recipe (JSON workflow)
  python cli.py recipe edit --id 1
  # Edit editable/recipe_1.json, then run the same command again

  # List everything
  python cli.py ingredient list
  python cli.py recipe list

  # Search for recipes and ingredients
  python cli.py recipe search "pasta"
  python cli.py recipe search "pesto" --limit 5
  python cli.py ingredient search "tomato" --limit 5

  # Semantic search (requires embeddings)
  python cli.py embed
  python cli.py recipe search "mushroom pasta" --semantic
  python cli.py ingredient suggest "mushroom, wine" --semantic

  # Suggest recipes by ingredients
  python cli.py ingredient suggest "basil"
  python cli.py ingredient suggest "basil, tomato pesto"
  python cli.py ingredient suggest "carrots, turnip, basil, tomato pesto"

  # Search by tags
  python cli.py tags list
  python cli.py tags recipe search "italian"
  python cli.py tags ingredient search "spice"
  python cli.py tags article search "cooking"

  # Get help for a specific command
  python cli.py recipe --help
  python cli.py ingredient add --help
